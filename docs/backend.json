{
  "entities": {
    "submission": {
      "title": "Property Submission",
      "description": "A user's submission for property registration, pending registrar approval.",
      "type": "object",
      "properties": {
        "owner": { "type": "string", "description": "The Ethereum address of the user submitting the property." },
        "title": { "type": "string" },
        "description": { "type": "string" },
        "area": { "type": "string", "description": "e.g., 2000 sq.ft" },
        "imageUrl": { "type": "string", "description": "URL to an image in Firebase Storage." },
        "proofCID": { "type": "string", "description": "IPFS CID of the proof document." },
        "pointerCID": { "type": "string", "description": "Optional IPFS CID of a metadata JSON file." },
        "status": { "type": "string", "enum": ["pending", "approved", "rejected"] },
        "createdAt": { "type": "string", "format": "date-time", "description": "Firestore Timestamp of when the submission was created." }
      },
      "required": ["owner", "title", "description", "imageUrl", "proofCID", "status", "createdAt"]
    },
    "property": {
      "title": "Registered Property",
      "description": "A property that has been verified by the registrar and registered on the blockchain.",
      "type": "object",
      "properties": {
        "parcelId": { "type": "string", "description": "Immutable ID generated by the smart contract (ownerAddress-n)." },
        "owner": { "type": "string", "description": "The Ethereum address of the current owner." },
        "title": { "type": "string" },
        "description": { "type": "string" },
        "area": { "type": "string" },
        "imageUrl": { "type": "string", "description": "URL to an image in Firebase Storage." },
        "ipfsProofCid": { "type": "string", "description": "IPFS CID of the proof document." },
        "pointerCid": { "type": "string" },
        "verified": { "type": "boolean", "description": "Always true for documents in this collection." },
        "txHash": { "type": "string", "description": "The blockchain transaction hash of the registration or last sale." },
        "forSale": { "type": "boolean" },
        "price": { "type": "string", "description": "Price in wei if for sale." },
        "history": {
          "type": "array",
          "items": {
            "type": "object",
            "properties": {
              "from": { "type": "string" },
              "to": { "type": "string" },
              "txHash": { "type": "string" },
              "timestamp": { "type": "string", "format": "date-time" },
              "price": { "type": "string" }
            }
          }
        },
        "registeredAt": { "type": "string", "format": "date-time", "description": "Firestore Timestamp of when the property was registered." }
      },
      "required": ["parcelId", "owner", "title", "imageUrl", "ipfsProofCid", "verified", "txHash", "forSale", "history", "registeredAt"]
    }
  },
  "auth": {
    "providers": ["anonymous"]
  },
  "firestore": {
    "/submissions/{submissionId}": {
      "schema": { "$ref": "#/entities/submission" },
      "description": "Stores property registration submissions pending review."
    },
    "/properties/{parcelId}": {
      "schema": { "$ref": "#/entities/property" },
      "description": "Stores details of canonically registered properties."
    }
  }
}
